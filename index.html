<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–õ–∏—Å—ë–Ω–æ–∫ –∏ –Å–∂–∏–∫ ‚Äî —Å–≤–∞–¥–µ–±–Ω–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- –ü–∏–∫—Å–µ–ª—å–Ω—ã–π —à—Ä–∏—Ñ—Ç -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background:
        radial-gradient(circle at top, #ffcfb3 0, #ff8b6a 28%, #5a0a16 65%, #1b0205 100%);
      font-family: "Press Start 2P", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: #fff4ea;
    }

    #app {
      width: 95%;
      max-width: 900px;
      padding: 16px;
    }

    .pixel-card {
      border: 4px solid #2b050b;
      background: linear-gradient(180deg, rgba(35, 2, 7, 0.95), rgba(16, 1, 4, 0.98));
      box-shadow:
        0 0 0 4px #ffb9a0,
        0 0 0 8px #2b050b,
        0 18px 0 8px #120106;
      padding: 20px 18px 24px;
      position: relative;
      overflow: hidden;
    }

    .pixel-header {
      text-align: center;
      margin-bottom: 10px;
    }

    .pixel-header h1 {
      font-size: 14px;
      line-height: 1.4;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .pixel-sub {
      font-size: 8px;
      margin-top: 4px;
      opacity: 0.9;
    }

    /* –§–æ–Ω-—É–ª–æ—á–∫–∞ */
    .lantern-row {
      position: absolute;
      top: 10px;
      left: -20px;
      right: -20px;
      height: 20px;
      background:
        repeating-linear-gradient(
          90deg,
          rgba(255, 230, 200, 0.14),
          rgba(255, 230, 200, 0.14) 8px,
          transparent 8px,
          transparent 36px
        );
      pointer-events: none;
    }

    .lantern {
      position: absolute;
      top: -6px;
      width: 20px;
      height: 24px;
      border-radius: 10px;
      background: radial-gradient(circle at 50% 30%, #fff5d7 0, #ffcf6b 35%, #ff5b3c 80%);
      box-shadow: 0 0 12px 2px rgba(255, 173, 96, 0.9);
      border: 2px solid #4b0507;
    }
    .lantern::after {
      content: "";
      position: absolute;
      left: 50%;
      top: -6px;
      transform: translateX(-50%);
      width: 2px;
      height: 6px;
      background: #f1e0c1;
    }

    .lantern.l1 { left: 12%; }
    .lantern.l2 { left: 46%; }
    .lantern.l3 { left: 80%; }

    /* –õ–ê–ë–ò–†–ò–ù–¢-–°–ë–õ–ò–ñ–ï–ù–ò–ï */
    .maze {
      margin: 4px 0 10px;
      position: relative;
      height: 26px;
    }

    .maze-line {
      position: absolute;
      top: 12px;
      left: 8%;
      right: 8%;
      height: 4px;
      background:
        repeating-linear-gradient(
          90deg,
          #3e0c10,
          #3e0c10 6px,
          #6d1b22 6px,
          #6d1b22 12px
        );
      border: 2px solid #120106;
    }

    .maze-fox,
    .maze-hedgehog {
      position: absolute;
      top: 2px;
      font-size: 14px;
      text-shadow: 1px 1px #000;
      transition: left 0.3s ease, right 0.3s ease, transform 0.2s ease;
      opacity: 0.9;
      cursor: default;
    }

    .maze-fox { left: 6%; }
    .maze-hedgehog { right: 6%; }

    .maze-fox.active,
    .maze-hedgehog.active {
      transform: translateY(-2px);
      filter: drop-shadow(0 0 4px rgba(255, 217, 180, 0.9));
      opacity: 1;
    }

    .maze-heart {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translate(-50%, 4px);
      font-size: 16px;
      text-shadow: 1px 1px #000;
      opacity: 0;
      transition: opacity 0.4s ease, transform 0.4s ease;
      cursor: pointer;
    }

    .maze-heart.visible {
      opacity: 1;
      transform: translate(-50%, 0);
    }

    .story-text {
      font-size: 10px;
      line-height: 1.7;
      margin-bottom: 14px;
      white-space: pre-line;
    }

    .small-caption {
      font-size: 8px;
      opacity: 0.8;
      margin-top: 4px;
    }

    .screen {
      display: none;
      margin-top: 6px;
    }

    .screen.active { display: block; }

    .buttons-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 6px;
    }

    button.pixel-btn {
      font-family: "Press Start 2P", system-ui;
      font-size: 9px;
      padding: 8px 11px;
      border: 3px solid #190104;
      background: linear-gradient(#ffd37a, #ff9b4d);
      box-shadow: 0 3px 0 #190104;
      text-transform: uppercase;
      cursor: pointer;
      transition: transform 0.1s ease, box-shadow 0.1s ease, filter 0.1s ease, box-shadow 0.15s;
      color: #1a0203;
      max-width: 100%;
    }

    button.pixel-btn.secondary {
      background: linear-gradient(#ff9688, #ff4a4a);
      color: #fff7f3;
    }

    button.pixel-btn.ghost {
      background: transparent;
      color: #ffe9de;
      border-color: #ffb9a0;
      box-shadow: 0 3px 0 #190104;
    }

    button.pixel-btn.connect-main {
      width: 100%;
      justify-content: center;
      background: linear-gradient(#ffb4c0, #ff4a73);
      color: #fff7f5;
      margin-top: 8px;
      box-shadow:
        0 3px 0 #190104,
        0 0 24px 3px rgba(255, 160, 190, 0.95);
    }

    button.pixel-btn.connect-main.flash {
      animation: connectFlash 0.7s ease-out 0s 2;
    }

    @keyframes connectFlash {
      0%   { box-shadow: 0 3px 0 #190104, 0 0 0 rgba(255,255,255,0); transform: translateY(0); }
      50%  { box-shadow: 0 3px 0 #190104, 0 0 30px rgba(255, 210, 230, 1); transform: translateY(-1px); }
      100% { box-shadow: 0 3px 0 #190104, 0 0 0 rgba(255,255,255,0); transform: translateY(0); }
    }

    button.pixel-btn:hover { filter: brightness(1.05); }

    button.pixel-btn:active {
      transform: translateY(2px);
      box-shadow: 0 1px 0 #190104;
    }

    .invite-block {
      margin-top: 8px;
      padding: 12px;
      border: 2px solid #ffb9a0;
      background: rgba(33, 2, 7, 0.9);
      font-size: 9px;
      line-height: 1.7;
    }

    .invite-block h2 {
      font-size: 11px;
      margin-bottom: 8px;
    }

    .date-line {
      margin: 8px 0;
      font-size: 10px;
    }

    .location {
      font-size: 8px;
      opacity: 0.9;
      margin-bottom: 8px;
    }

    .dresscode-block {
      margin-top: 10px;
      padding: 8px;
      border-radius: 4px;
      background: rgba(120, 9, 22, 0.85);
      border: 1px solid #ffb9a0;
      font-size: 8px;
      line-height: 1.6;
    }

    .dresscode-title {
      font-size: 9px;
      margin-bottom: 4px;
      text-transform: uppercase;
    }

    .rsvp-block {
      margin-top: 12px;
      border-top: 2px dashed #ffb9a0;
      padding-top: 10px;
      font-size: 9px;
    }

    .rsvp-block h3 {
      font-size: 10px;
      margin-bottom: 8px;
    }

    .rsvp-form {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 4px;
    }

    .rsvp-form label {
      font-size: 8px;
      display: block;
      margin-bottom: 2px;
    }

    .rsvp-form input,
    .rsvp-form select,
    .rsvp-form textarea {
      width: 100%;
      padding: 6px 6px;
      border: 2px solid #2b050b;
      font-family: inherit;
      font-size: 9px;
      background: #fff8f1;
      color: #1a0203;
      outline: none;
    }

    .rsvp-form textarea {
      resize: vertical;
      min-height: 50px;
    }

    .rsvp-note {
      font-size: 8px;
      opacity: 0.75;
      margin-top: 4px;
    }

    .rsvp-success {
      font-size: 9px;
      margin-top: 8px;
      color: #c6ffb8;
      display: none;
      white-space: pre-line;
    }

    .console {
      margin-top: 12px;
      padding: 8px;
      background: #150106;
      border: 2px solid #5c1b1f;
      font-family: "Press Start 2P", system-ui;
      font-size: 8px;
      line-height: 1.6;
      height: 70px;
      overflow: hidden;
      white-space: pre-line;
      color: #ffdcd0;
    }

    /* –î–∏–∞–ª–æ–≥-–±–æ–∫—Å –≤–∏–∑—É–∞–ª—å–Ω–æ–π –Ω–æ–≤–µ–ª–ª—ã */
    .chapter-title {
      text-align: center;
      font-size: 9px;
      text-transform: uppercase;
      margin-bottom: 4px;
      letter-spacing: 1px;
      color: #ffd7b5;
    }

    .vn-box {
      margin-top: 4px;
      padding: 8px;
      border: 2px solid #ffb9a0;
      background: rgba(20, 1, 5, 0.9);
      font-size: 9px;
      line-height: 1.6;
      transition: box-shadow 0.2s ease, border-color 0.2s ease;
    }

    .vn-row {
      display: flex;
      gap: 8px;
      align-items: flex-start;
    }

    .vn-avatar {
      width: 44px;
      height: 44px;
      border: 3px solid #190104;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      box-shadow: 0 0 0 3px #ffe0c4;
      image-rendering: pixelated;
      position: relative;
      overflow: hidden;
    }

    .vn-avatar.fox {
      background:
        linear-gradient(180deg, #ffcc99 0%, #ff9b5e 60%, #7c341c 100%);
    }
    .vn-avatar.fox::after {
      content: "L";
      position: absolute;
      bottom: 2px;
      right: 3px;
      font-size: 8px;
      color: #2b0505;
      text-shadow: 0 0 2px #ffd8bd;
    }

    .vn-avatar.hedgehog {
      background:
        linear-gradient(180deg, #e3c4ff 0%, #c49aff 55%, #6b3a9e 100%);
    }
    .vn-avatar.hedgehog::after {
      content: "S";
      position: absolute;
      bottom: 2px;
      right: 3px;
      font-size: 8px;
      color: #1a021f;
      text-shadow: 0 0 2px #f6e3ff;
    }

    .vn-content {
      flex: 1;
    }

    .vn-speaker {
      font-size: 9px;
      margin-bottom: 4px;
      text-transform: uppercase;
      color: #ffd1b3;
    }

    .vn-text {
      font-size: 9px;
      white-space: pre-line;
    }

    /* –ú–∞–ª–µ–Ω—å–∫–∏–µ —Å—Ç—Ä–µ–ª–∫–∏ –ø–æ–¥ –¥–∏–∞–ª–æ–≥–æ–º */
    .nav-row {
      margin-top: 6px;
      display: flex;
      justify-content: center;
      gap: 16px;
    }

    .nav-arrow {
      font-family: "Press Start 2P", system-ui;
      font-size: 10px;
      padding: 4px 8px;
      border: 2px solid #190104;
      background: #2b050b;
      color: #ffe9de;
      cursor: pointer;
      box-shadow: 0 2px 0 #120106;
      transition: transform 0.1s ease, box-shadow 0.1s.ease;
    }

    .nav-arrow:active {
      transform: translateY(1px);
      box-shadow: 0 1px 0 #120106;
    }

    .icons-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 8px;
      justify-content: flex-end;
    }

    .icon-btn {
      border: 2px solid #2b050b;
      background: #2a0207;
      color: #ffe8d9;
      font-family: "Press Start 2P", system-ui;
      font-size: 8px;
      padding: 5px 7px;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      cursor: pointer;
      box-shadow: 0 2px 0 #120105;
      transition: transform 0.1s ease, box-shadow 0.1s ease, filter 0.1s ease;
    }

    .icon-btn span {
      font-size: 12px;
    }

    .icon-btn:hover {
      filter: brightness(1.2);
    }

    .icon-btn:active {
      transform: translateY(2px);
      box-shadow: 0 1px 0 #120105;
    }

    .icon-btn.active {
      box-shadow:
        0 2px 0 #120105,
        0 0 10px 2px rgba(255, 210, 180, 0.9);
      border-color: #ffb9a0;
      filter: brightness(1.15);
    }

    /* –û–≤–µ—Ä–ª–µ–∏ */
    .overlay {
      position: absolute;
      inset: 0;
      background: rgba(10, 0, 3, 0.82);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }

    .overlay.visible {
      display: flex;
    }

    .overlay-inner {
      background: #2a0207;
      border: 3px solid #ffb9a0;
      box-shadow: 0 0 18px rgba(0, 0, 0, 0.9);
      padding: 14px;
      width: 90%;
      max-width: 420px;
      text-align: center;
      font-size: 9px;
    }

    .overlay-title {
      font-size: 10px;
      margin-bottom: 10px;
      text-transform: uppercase;
    }

    .overlay-buttons {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 10px;
    }

    .overlay-close {
      margin-top: 4px;
      font-size: 8px;
      padding: 6px 8px;
    }

    /* –ü–æ–ø–∞–ø –¥–ª—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ */
    .artifact-popup {
      position: absolute;
      left: 50%;
      top: 20%;
      transform: translateX(-50%);
      background: #2a0207;
      border: 3px solid #ffddaa;
      padding: 10px 12px;
      font-size: 9px;
      text-align: center;
      box-shadow: 0 0 18px rgba(0, 0, 0, 0.85);
      z-index: 15;
      display: none;
      white-space: pre-line;
    }

    .artifact-popup-title {
      font-size: 9px;
      margin-bottom: 6px;
      color: #ffe6bf;
    }

    .artifact-popup strong {
      display: block;
      margin-bottom: 4px;
    }

    /* –¢–æ—Å—Ç –æ—Ç —Å–µ—Ä–¥–µ—á–∫–∞ */
    .heart-toast {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(42, 2, 7, 0.95);
      border: 2px solid #ffb9a0;
      padding: 6px 10px;
      font-size: 8px;
      text-align: center;
      box-shadow: 0 0 14px rgba(0, 0, 0, 0.8);
      display: none;
      white-space: pre-line;
      z-index: 20;
    }

    /* –ü—Ä–æ–ª–æ–≥ */
    #prologue-text {
      font-size: 10px;
      line-height: 1.7;
      opacity: 0.95;
      white-space: pre-line;
      min-height: 180px;
    }

    @media (max-width: 600px) {
      body {
        align-items: flex-start;
        padding: 12px 6px;
      }

      #app {
        width: 100%;
        padding: 0;
      }

      .pixel-card {
        padding: 14px 9px 18px;
        box-shadow:
          0 0 0 3px #ffb9a0,
          0 0 0 6px #2b050b;
      }

      .pixel-header h1 {
        font-size: 11px;
        letter-spacing: 1px;
      }

      .pixel-sub {
        font-size: 8px;
      }

      .maze {
        margin: 2px 0 8px;
        height: 24px;
      }

      .maze-fox,
      .maze-hedgehog {
        font-size: 12px;
        top: 3px;
      }

      .story-text {
        font-size: 9px;
        line-height: 1.5;
        margin-bottom: 10px;
      }

      .small-caption {
        font-size: 7px;
      }

      .buttons-row {
        gap: 8px;
      }

      button.pixel-btn {
        font-size: 8px;
        padding: 7px 9px;
      }

      .invite-block {
        padding: 10px;
        font-size: 8px;
      }

      .dresscode-block {
        font-size: 7.5px;
      }

      .rsvp-form input,
      .rsvp-form select,
      .rsvp-form textarea {
        font-size: 8px;
        padding: 5px 5px;
      }

      .console {
        font-size: 7px;
        height: 64px;
      }

      .vn-box {
        font-size: 8px;
      }

      .vn-avatar {
        width: 36px;
        height: 36px;
        font-size: 18px;
      }

      .icon-btn {
        font-size: 7px;
        padding: 4px 6px;
      }

      .overlay-inner {
        padding: 12px;
      }

      .nav-arrow {
        font-size: 9px;
        padding: 3px 7px;
      }
    }
  </style>
</head>
<body>
  <div id="app">
    <div class="pixel-card">
      <div class="lantern-row">
        <div class="lantern l1"></div>
        <div class="lantern l2"></div>
        <div class="lantern l3"></div>
      </div>

      <div class="pixel-header">
        <h1>–õ–ò–°–Å–ù–û–ö &amp; –Å–ñ–ò–ö</h1>
        <div class="pixel-sub">10 –º–∞—è 2026 ¬∑ —Å–≤–∞–¥–µ–±–Ω–∞—è –≤–∏–∑—É–∞–ª—å–Ω–∞—è –Ω–æ–≤–µ–ª–ª–∞</div>
      </div>

      <!-- –õ–∞–±–∏—Ä–∏–Ω—Ç-—Å–±–ª–∏–∂–µ–Ω–∏–µ -->
      <div class="maze">
        <div class="maze-line"></div>
        <div id="maze-fox" class="maze-fox">ü¶ä</div>
        <div id="maze-hedgehog" class="maze-hedgehog">ü¶î</div>
        <div id="maze-heart" class="maze-heart">‚ù§Ô∏è</div>
      </div>

      <!-- –≠–ö–†–ê–ù 0 ‚Äî –ü–†–û–õ–û–ì -->
      <div class="screen active" id="screen-0">
        <div id="prologue-text"></div>

        <div class="buttons-row" style="margin-top:14px; display:none;" id="prologue-btn-row">
          <button class="pixel-btn" onclick="nextScreen(1)">
            ‚ú¶ –ù–∞—á–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é ‚ú¶
          </button>
        </div>
      </div>

      <!-- –≠–ö–†–ê–ù 1 -->
      <div class="screen" id="screen-1">
        <div class="story-text">
          –í–µ—á–µ—Ä–æ–º, –ø–æ–¥ –∫—Ä–∞—Å–Ω—ã–º–∏ —Ñ–æ–Ω–∞—Ä–∏–∫–∞–º–∏,  
          –≤—Å–µ–ª–µ–Ω–Ω–∞—è –∑–∞–ø—É—Å—Ç–∏–ª–∞ –º–∞–ª–µ–Ω—å–∫—É—é –∏–≥—Ä—É:  
          ¬´–ê —á—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –õ–∏—Å—ë–Ω–∫–∞ –∏ –Å–∂–∏–∫–∞  
          –ø—É—Å—Ç–∏—Ç—å –ø–æ –æ–¥–Ω–æ–π —É–ª–æ—á–∫–µ —Å—É–¥—å–±—ã?¬ª

          –ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é, –≤—ã–±–µ—Ä–∏—Ç–µ, —á—å—é –∂–∏–∑–Ω—å –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–µ—Ä–≤–æ–π.
        </div>

        <div class="small-caption">
          (—Å–ø–æ–π–ª–µ—Ä: –≤ —Ñ–∏–Ω–∞–ª–µ –æ–Ω–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è)
        </div>

        <div class="buttons-row">
          <button id="btn-fox" class="pixel-btn" onclick="startPath('fox')">
            ‚ñ∂ –ü—É—Ç—å –õ–∏—Å—ë–Ω–∫–∞
          </button>
          <button id="btn-hedgehog" class="pixel-btn secondary" onclick="startPath('hedgehog')">
            ‚ñ∂ –ü—É—Ç—å –Å–∂–∏–∫–∞
          </button>
        </div>
      </div>

      <!-- –≠–ö–†–ê–ù 2 -->
      <div class="screen" id="screen-2">
        <div class="story-text" id="path-text"></div>

        <div class="buttons-row">
          <button class="pixel-btn" onclick="nextScreen(3)">
            ‚ûú –î–∞–ª—å—à–µ –ø–æ —É–ª–æ—á–∫–µ
          </button>
          <button class="pixel-btn ghost" onclick="backToStart()">
            ‚óÄ –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å –¥—Ä—É–≥–æ–≥–æ —Ä–∞–∫—É—Ä—Å–∞
          </button>
        </div>
      </div>

      <!-- –≠–ö–†–ê–ù 3 ‚Äî –≤–∏–∑—É–∞–ª—å–Ω–∞—è –Ω–æ–≤–µ–ª–ª–∞ -->
      <div class="screen" id="screen-3">
        <div class="story-text" id="joint-text">
          –¢–µ–ø–µ—Ä—å —ç—Ç–æ –º–∞–ª–µ–Ω—å–∫–∞—è –≤–∏–∑—É–∞–ª—å–Ω–∞—è –Ω–æ–≤–µ–ª–ª–∞:  
          –õ–∏—Å—ë–Ω–æ–∫ –∏ –Å–∂–∏–∫ –ø–æ –æ—á–µ—Ä–µ–¥–∏ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—é—Ç –æ–¥–Ω—É –∏ —Ç—É –∂–µ –∏—Å—Ç–æ—Ä–∏—é,  
          –∞ –º—ã —Å–ª—É—à–∞–µ–º –∏—Ö –¥–∏–∞–ª–æ–≥.

          –§–∏–Ω–∞–ª—å–Ω–∞—è –≥–ª–∞–≤–∞ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –≤—Å–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –±—É–¥—É—Ç —Å–æ–±—Ä–∞–Ω—ã.
        </div>

        <!-- –ò–∫–æ–Ω–∫–∏ –≥–ª–∞–≤ –∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∫—Ä—ã—Ç—ã, –ø–æ—è–≤—è—Ç—Å—è –ø–æ—Å–ª–µ "–î–∞–ª—å—à–µ –ø–æ —É–ª–æ—á–∫–µ") -->
        <div class="icons-row" id="top-actions-row" style="display:none;">
          <button class="icon-btn" id="chapters-toggle">
            <span>üìë</span> –≥–ª–∞–≤—ã
          </button>
          <button class="icon-btn" id="inventory-btn">
            <span id="inventory-icon">üß∞</span> –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
          </button>
        </div>

        <!-- –ù–∞–∑–≤–∞–Ω–∏–µ –≥–ª–∞–≤—ã -->
        <div id="chapter-title" class="chapter-title">
          –≥–ª–∞–≤–∞ –µ—â—ë –Ω–µ –≤—ã–±—Ä–∞–Ω–∞
        </div>

        <div class="vn-box" id="vn-box">
          <div class="vn-row">
            <div id="vn-avatar" class="vn-avatar fox">ü¶ä</div>
            <div class="vn-content">
              <div class="vn-speaker" id="vn-speaker">–í—ã–±–µ—Ä–∏—Ç–µ –≥–ª–∞–≤—É</div>
              <div class="vn-text" id="vn-text">
                –õ–∏—Å—ë–Ω–æ–∫ –∏ –Å–∂–∏–∫ –±—É–¥—É—Ç –ø–æ –æ—á–µ—Ä–µ–¥–∏ –≥–æ–≤–æ—Ä–∏—Ç—å,  
                –∞ —Ç–æ—Ç, –∫—Ç–æ —Å–µ–π—á–∞—Å –≥–æ–≤–æ—Ä–∏—Ç, –ø–æ–¥—Å–≤–µ—Ç–∏—Ç—Å—è –ø–æ–¥ —Ñ–æ–Ω–∞—Ä–∏–∫–∞–º–∏.
              </div>
            </div>
          </div>
        </div>

        <!-- –ú–∞–ª–µ–Ω—å–∫–∏–µ —Å—Ç—Ä–µ–ª–∫–∏ –ø–æ–¥ –¥–∏–∞–ª–æ–≥–æ–º -->
        <div class="nav-row">
          <button class="nav-arrow" onclick="prevLine()">‚óÄ</button>
          <button class="nav-arrow" onclick="nextLine()">‚ñ∂</button>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∞ "–°–ª–µ–¥—É—é—â–∞—è –≥–ª–∞–≤–∞" -->
        <div class="buttons-row" id="next-chapter-row" style="display:none; margin-top:6px;">
          <button class="pixel-btn secondary" id="next-chapter-btn" onclick="goToNextChapter()">
            ‚ûú –°–ª–µ–¥—É—é—â–∞—è –≥–ª–∞–≤–∞
          </button>
        </div>

        <!-- –ù–∏–∑: –∫–Ω–æ–ø–∫–∞ "—Å –Ω–∞—á–∞–ª–∞" –∏ —Ñ–∏–Ω–∞–ª (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∫—Ä—ã—Ç) -->
        <div class="buttons-row" style="margin-top: 8px;">
          <button class="pixel-btn ghost" onclick="backToStart()">
            ‚óÄ –° –Ω–∞—á–∞–ª–∞ –∏—Å—Ç–æ—Ä–∏–∏
          </button>
          <button
            id="connect-btn"
            class="pixel-btn connect-main"
            onclick="connectPaths()"
            style="display:none;"
          >
            ‚ù§ –£–†–ê! –í–°–ï –ê–†–¢–ï–§–ê–ö–¢–´ –°–û–ë–†–ê–ù–´ ‚Äî –§–ò–ù–ê–õ–¨–ù–ê–Ø –ì–õ–ê–í–ê
          </button>
        </div>
      </div>

      <!-- –≠–ö–†–ê–ù 4 -->
      <div class="screen" id="screen-4">
        <div class="invite-block">
          <h2>–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –ø–æ–¥ –∫—Ä–∞—Å–Ω—ã–º–∏ —Ñ–æ–Ω–∞—Ä–∏–∫–∞–º–∏</h2>

          <div class="date-line">
            10 –º–∞—è 2026 ¬∑ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ ¬∑ 19:40
          </div>
          <div class="location">
            –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥, –î–≤–æ—Ä–µ—Ü –±—Ä–∞–∫–æ—Å–æ—á–µ—Ç–∞–Ω–∏—è ‚Ññ1  
            (—Ç–æ—Ç —Å–∞–º—ã–π, –¥–≤–æ—Ä—Ü–æ–≤—ã–π, –∫–∞–∫ —Ñ–æ–Ω –¥–ª—è –¥–æ—Ä–∞–º—ã)
          </div>

          <div class="story-text" style="margin-bottom: 6px;">
            –ú—ã, –õ–∏—Å—ë–Ω–æ–∫ –∏ –Å–∂–∏–∫, –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ  
            —Ñ–∏–∫—Å–∏—Ä—É–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –∏–≥—Ä—ã ¬´–í–º–µ—Å—Ç–µ¬ª  
            –∏ –∑–æ–≤—ë–º –≤–∞—Å —Å—Ç–∞—Ç—å —á–∞—Å—Ç—å—é —ç—Ç–æ–≥–æ —É—Ä–æ–≤–Ω—è ‚Äî
            –Ω–∞—à–µ–≥–æ —Å–≤–∞–¥–µ–±–Ω–æ–≥–æ –≤–µ—á–µ—Ä–∞.
          </div>

          <div class="dresscode-block">
            <div class="dresscode-title">–î–†–ï–°–°-–ö–û–î (–ü–û –ñ–ï–õ–ê–ù–ò–Æ)</div>
            –ú—ã –¥–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–∞—à –¥–µ–Ω—å –Ω–µ–º–Ω–æ–≥–æ –∫–∏—Ç–∞–π—Å–∫–æ–π –º–∞–≥–∏–∏ –∏ –∫—Ä–∞—Å–Ω—ã—Ö –æ–≥–æ–Ω—å–∫–æ–≤.  
            –ï—Å–ª–∏ –≤–∞–º –±—É–¥–µ—Ç —É–¥–æ–±–Ω–æ, –±—É–¥–µ–º –æ—á–µ–Ω—å —Ä–∞–¥—ã, –µ—Å–ª–∏ –≤—ã –ø–æ–¥–¥–µ—Ä–∂–∏—Ç–µ  
            –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –æ–±—Ä–∞–∑–æ–º –≤ –æ—Ç—Ç–µ–Ω–∫–∞—Ö:

            –∫—Ä–∞—Å–Ω—ã–π, –±–æ—Ä–¥–æ–≤—ã–π, –≥—Ä–∞–Ω–∞—Ç–æ–≤—ã–π, —á—ë—Ä–Ω—ã–π, —Ç—ë–º–Ω–æ-—Å–∏–Ω–∏–π, –≥–ª—É–±–æ–∫–æ–µ –≤–∏–Ω–æ.

            –≠—Ç–æ –Ω–µ —Å—Ç—Ä–æ–≥–∏–µ –ø—Ä–∞–≤–∏–ª–∞ ‚Äî –≤–∞–∂–Ω–µ–µ –≤—Å–µ–≥–æ, —á—Ç–æ–±—ã –≤–∞–º –±—ã–ª–æ –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ.  
            –ù–æ –µ—Å–ª–∏ –≤—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç–µ—Å—å –∫ —Ü–≤–µ—Ç–æ–≤–æ–π –≤–æ–ª–Ω–µ,  
            —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –±—É–¥—É—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –∫–∞–∫ –∫–∞–¥—Ä—ã –∏–∑ –Ω–æ—á–Ω–æ–π –∞–∑–∏–∞—Ç—Å–∫–æ–π —É–ª–æ—á–∫–∏. ‚ù§Ô∏è
          </div>

          <div class="rsvp-block">
            <h3>RSVP ‚Äî –±—É–¥–µ—Ç–µ –ª–∏ –≤—ã —Å –Ω–∞–º–∏?</h3>

            <form id="rsvp-form" class="rsvp-form">
              <div>
                <label for="name">–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è</label>
                <input id="name" name="name" type="text" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –¢—ë—Ç—è –ú–∞—Ä–∏–Ω–∞" />
              </div>

              <div>
                <label for="status">–í–∞—à —Å—Ç–∞—Ç—É—Å</label>
                <select id="status" name="status" required>
                  <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç</option>
                  <option value="–î–∞, –ø—Ä–∏–¥—É">–î–∞, –ø—Ä–∏–¥—É –∏ –ø—Ä–∏–Ω–µ—Å—É –ª—é–±–æ–≤—å</option>
                  <option value="–ü–æ–∫–∞ –Ω–µ —É–≤–µ—Ä–µ–Ω–∞">–ü–æ–∫–∞ –Ω–µ —É–≤–µ—Ä–µ–Ω–∞, —É—Ç–æ—á–Ω—é –ø–æ–∑–∂–µ</option>
                  <option value="–ù–µ —Å–º–æ–≥—É">–ù–µ —Å–º–æ–≥—É, –Ω–æ –±—É–¥—É —Å –≤–∞–º–∏ —Å–µ—Ä–¥—Ü–µ–º</option>
                </select>
              </div>

              <div>
                <label for="plusone">–ü—Ä–∏–¥—ë—Ç–µ –ª–∏ –≤—ã —Å +1?</label>
                <input id="plusone" name="plusone" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –¥–∞, —Å –º—É–∂–µ–º / –Ω–µ—Ç / —Å —Ä–µ–±—ë–Ω–∫–æ–º" />
              </div>

              <div>
                <label for="song">–ü–µ—Å–Ω—è, –ø–æ–¥ –∫–æ—Ç–æ—Ä—É—é –≤—ã —Ö–æ—Ç–∏—Ç–µ –Ω–∞—Å –≤–∏–¥–µ—Ç—å –∏–ª–∏ —Ç–∞–Ω—Ü–µ–≤–∞—Ç—å</label>
                <input id="song" name="song" type="text" placeholder="–ú–æ–∂–Ω–æ —Ç—Ä–µ–∫ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ ¬´—á—Ç–æ-–Ω–∏–±—É–¥—å –º–µ–¥–ª–µ–Ω–Ω–æ–µ¬ª" />
              </div>

              <div>
                <label for="message">–°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –õ–∏—Å—ë–Ω–∫–∞ –∏ –Å–∂–∏–∫–∞</label>
                <textarea id="message" name="message" placeholder="–ü–æ–∂–µ–ª–∞–Ω–∏—è, —à—É—Ç–∫–∏, —É–≥—Ä–æ–∑—ã –æ–±–Ω—è—Ç—å ‚Äî –≤—Å—ë —Å—é–¥–∞"></textarea>
              </div>

              <button type="submit" class="pixel-btn">
                ‚úî –û—Ç–ø—Ä–∞–≤–∏—Ç—å RSVP
              </button>

              <div class="rsvp-note">
                –§–æ—Ä–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø–∏–∫—Å–µ–ª—å–Ω–∞—è –º–∞–≥–∏—è:  
                –¥–∞–Ω–Ω—ã–µ —É–≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ –õ–∏—Å—ë–Ω–æ–∫ –∏ –Å–∂–∏–∫  
                (–∏ —Ç–æ—Ç, –∫—Ç–æ –æ—Ç–∫—Ä–æ–µ—Ç —ç—Ç–æ—Ç —Ñ–∞–π–ª üòå).
              </div>
            </form>

            <div id="rsvp-success" class="rsvp-success">
              –°–ø–∞—Å–∏–±–æ!  
              –í–∞—à RSVP —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ —Å–µ—Ä–¥–µ—á–Ω–æ–π –ø–∞–º—è—Ç–∏ –õ–∏—Å—ë–Ω–∫–∞ –∏ –Å–∂–∏–∫–∞ üíæ‚ù§Ô∏è
            </div>
          </div>
        </div>

        <div class="buttons-row" style="margin-top: 10px;">
          <button class="pixel-btn ghost" onclick="backToStart()">
            ‚óÄ –ï—â—ë —Ä–∞–∑ –ø—Ä–æ–π—Ç–∏ –∏—Å—Ç–æ—Ä–∏—é
          </button>
        </div>
      </div>

      <!-- –û–≤–µ—Ä–ª–µ–π –≥–ª–∞–≤ -->
      <div id="chapters-overlay" class="overlay">
        <div class="overlay-inner">
          <div class="overlay-title">–í—ã–±–µ—Ä–∏—Ç–µ –≥–ª–∞–≤—É</div>
          <div class="overlay-buttons">
            <button id="chap-exam" class="pixel-btn secondary" onclick="showExam()">
              üìö –≠–∫–∑–∞–º–µ–Ω ‚Äî –ø–µ—Ä–≤—ã–π —Å–±–æ–π —Å–∏—Å—Ç–µ–º—ã
            </button>
            <button id="chap-walks" class="pixel-btn secondary" onclick="showWalks()">
              üö∂ –ü—Ä–æ–≥—É–ª–∫–∏ ‚Äî —Å—Ç—Ä–∞–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏—è
            </button>
            <button id="chap-pskov" class="pixel-btn secondary" onclick="showPskov()">
              üè∞ –ü—Å–∫–æ–≤ ‚Äî –Ω–∞—à –º–∞–ª–µ–Ω—å–∫–∏–π –ø–æ–±–µ–≥
            </button>
            <button id="chap-japan" class="pixel-btn secondary" onclick="showJapan()">
              ‚úàÔ∏è –Ø–ø–æ–Ω–∏—è ‚Äî –∞–Ω–∏–º–µ –±–µ–∑ —Å—É–±—Ç–∏—Ç—Ä–æ–≤
            </button>
          </div>
          <button id="chapters-close" class="pixel-btn ghost overlay-close">
            ‚úï –ó–∞–∫—Ä—ã—Ç—å
          </button>
        </div>
      </div>

      <!-- –û–≤–µ—Ä–ª–µ–π –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è -->
      <div id="inventory-overlay" class="overlay">
        <div class="overlay-inner">
          <div class="overlay-title">üéÆ –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø–∞—Ä—ã</div>
          <div id="inventory-list" style="text-align:left; font-size:8px; line-height:1.6;">
            <!-- —Å—é–¥–∞ –ø–æ–¥—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã -->
          </div>
          <button id="inventory-close" class="pixel-btn ghost overlay-close">
            ‚úï –ó–∞–∫—Ä—ã—Ç—å
          </button>
        </div>
      </div>

      <!-- –ü–æ–ø–∞–ø "–∞—Ä—Ç–µ—Ñ–∞–∫—Ç —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω" -->
      <div id="artifact-popup" class="artifact-popup">
        <div class="artifact-popup-title">‚ú® –†–ê–ó–ë–õ–û–ö–ò–†–û–í–ê–ù –ê–†–¢–ï–§–ê–ö–¢ ‚ú®</div>
        <strong id="artifact-popup-name"></strong>
        <div id="artifact-popup-text"></div>
      </div>

      <!-- –¢–æ—Å—Ç –æ—Ç —Å–µ—Ä–¥–µ—á–∫–∞ -->
      <div id="heart-toast" class="heart-toast">
        –°–ø–∞—Å–∏–±–æ, —á—Ç–æ –≤—ã —Å –Ω–∞–º–∏ –≤ —ç—Ç–æ–π –∏—Å—Ç–æ—Ä–∏–∏ üíå
      </div>

      <div class="console" id="console">
        > –ó–∞–ø—É—Å–∫ –Ω–æ—á–Ω–æ–π —É–ª–æ—á–∫–∏...  
        > –ó–∞–≥—Ä—É–∑–∫–∞ –õ–∏—Å—ë–Ω–∫–∞ –∏ –Å–∂–∏–∫–∞ –ø–æ–¥ –∫—Ä–∞—Å–Ω—ã–º–∏ —Ñ–æ–Ω–∞—Ä–∏–∫–∞–º–∏...  
        > –û–∂–∏–¥–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –ø—É—Ç–∏...
      </div>
    </div>
  </div>

  <script>
    const screens = {
      0: document.getElementById("screen-0"),
      1: document.getElementById("screen-1"),
      2: document.getElementById("screen-2"),
      3: document.getElementById("screen-3"),
      4: document.getElementById("screen-4"),
    };

    const consoleBox = document.getElementById("console");
    const pathText = document.getElementById("path-text");
    const jointText = document.getElementById("joint-text");
    const rsvpForm = document.getElementById("rsvp-form");
    const rsvpSuccess = document.getElementById("rsvp-success");

    const mazeFox = document.getElementById("maze-fox");
    const mazeHedgehog = document.getElementById("maze-hedgehog");
    const mazeHeart = document.getElementById("maze-heart");
    const heartToast = document.getElementById("heart-toast");

    const vnAvatar = document.getElementById("vn-avatar");
    const vnSpeaker = document.getElementById("vn-speaker");
    const vnText = document.getElementById("vn-text");
    const chapterTitle = document.getElementById("chapter-title");

    const chaptersOverlay = document.getElementById("chapters-overlay");
    const chaptersToggle = document.getElementById("chapters-toggle");
    const chaptersClose = document.getElementById("chapters-close");

    const inventoryOverlay = document.getElementById("inventory-overlay");
    const inventoryToggle = document.getElementById("inventory-btn");
    const inventoryClose = document.getElementById("inventory-close");
    const inventoryList = document.getElementById("inventory-list");
    const inventoryIcon = document.getElementById("inventory-icon");

    const artifactPopup = document.getElementById("artifact-popup");
    const artifactPopupName = document.getElementById("artifact-popup-name");
    const artifactPopupText = document.getElementById("artifact-popup-text");

    const connectBtn = document.getElementById("connect-btn");
    const topActionsRow = document.getElementById("top-actions-row");

    const nextChapterRow = document.getElementById("next-chapter-row");
    const nextChapterBtn = document.getElementById("next-chapter-btn");

    // –ø–æ—Ä—è–¥–æ–∫ –≥–ª–∞–≤
    const chapterOrder = ["exam", "walks", "pskov", "japan"];

    function getNextChapterKey(current) {
      const idx = chapterOrder.indexOf(current);
      if (idx === -1 || idx === chapterOrder.length - 1) return null;
      return chapterOrder[idx + 1];
    }

    // –ü—Ä–æ–ª–æ–≥ ‚Äî —Ç–µ–∫—Å—Ç –∏ —ç–ª–µ–º–µ–Ω—Ç—ã
    const prologueFullText =
`–ö–æ–≥–¥–∞-—Ç–æ –≤—Å–µ–ª–µ–Ω–Ω–∞—è —Ä–µ—à–∏–ª–∞ –Ω–µ–º–Ω–æ–≥–æ –ø–æ—à—É—Ç–∏—Ç—å.

–í –æ–¥–∏–Ω –≤–µ—Å–µ–Ω–Ω–∏–π –¥–µ–Ω—å –æ–Ω–∞ –ø–æ–ª–æ–∂–∏–ª–∞ —Ä—è–¥–æ–º –¥–≤—É—Ö —Å—É—â–µ—Å—Ç–≤:
–õ–∏—Å—ë–Ω–∫–∞ ‚Äî —Å–æ–ª–Ω–µ—á–Ω–æ–≥–æ, —Ö–∞–æ—Ç–∏—á–Ω–æ–≥–æ, —á—É–≤—Å—Ç–≤—É—é—â–µ–≥–æ;
–∏ –Å–∂–∏–∫–∞ ‚Äî —Å–ø–æ–∫–æ–π–Ω–æ–≥–æ, –ø—Ä–∞–∫—Ç–∏—á–Ω–æ–≥–æ, —á—É—Ç—å —Ö–æ–ª–æ–¥–Ω–æ–≥–æ.

–ü—è—Ç—å –ª–µ—Ç –æ–Ω–∏ —Ö–æ–¥–∏–ª–∏ –≤–æ–∫—Ä—É–≥,
–Ω–µ –∑–∞–º–µ—á–∞—è, —á—Ç–æ –ø–µ—Ä–µ–º—ã—á–∫–∏ —Å—É–¥—å–±—ã —É–∂–µ –≥–æ—Ä—è—Ç –ø–æ–¥ –Ω–æ–≥–∞–º–∏.
–ò –ª–∏—à—å –æ–¥–∏–Ω —ç–∫–∑–∞–º–µ–Ω, –æ–¥–∏–Ω —Å–±–æ–π —Å–∏—Å—Ç–µ–º—ã,
–æ–¥–Ω–∞ –ø—Ä–∏—Ç–∏—Ö—à–∞—è –≤—Å—Ç—Ä–µ—á–∞ –ø–æ—Å–ª–µ –±–∏–ª–µ—Ç–∞ ‚Äî
—Å—Ç–∞–ª–∏ —Ç–æ—á–∫–æ–π, —Å –∫–æ—Ç–æ—Ä–æ–π –Ω–∞—á–∞–ª–∞—Å—å –∏—Å—Ç–æ—Ä–∏—è.

–≠—Ç–∞ –∏–≥—Ä–∞ ‚Äî –æ —Ç–æ–º, –∫–∞–∫ –¥–≤–∞ –º–∞—Ä—à—Ä—É—Ç–∞,
–¥–≤–µ –≥–æ–ª–æ–≤—ã, –¥–≤–µ —Å–∫–æ—Ä–æ—Å—Ç–∏
–∏ –¥–≤–∞ —Å–µ—Ä–¥—Ü–∞
–º–µ–¥–ª–µ–Ω–Ω–æ —Å—Ö–æ–¥—è—Ç—Å—è –ø–æ–¥ –∫—Ä–∞—Å–Ω—ã–º–∏ —Ñ–æ–Ω–∞—Ä–∏–∫–∞–º–∏.

–ï—Å–ª–∏ –≤—ã –æ—Ç–∫—Ä—ã–ª–∏ —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É,
–∑–Ω–∞—á–∏—Ç –≤—ã ‚Äî —á–∞—Å—Ç—å —ç—Ç–æ–π –∏—Å—Ç–æ—Ä–∏–∏.
–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–∞–ª–µ–Ω—å–∫—É—é –≤—Å–µ–ª–µ–Ω–Ω—É—é –õ–∏—Å—ë–Ω–∫–∞ –∏ –Å–∂–∏–∫–∞.`;

    let prologueIndex = 0;
    const prologueSpeed = 28;
    const prologueBox = document.getElementById("prologue-text");
    const prologueBtnRow = document.getElementById("prologue-btn-row");

    let mazeStep = 0;
    let currentChapter = null; // 'exam' | 'walks' | 'pskov' | 'japan'
    let currentLine = 0;

    const scripts = {
      exam: {
        title: "–ì–ª–∞–≤–∞ 1: –≠–∫–∑–∞–º–µ–Ω ‚Äî –ø–µ—Ä–≤—ã–π —Å–±–æ–π —Å–∏—Å—Ç–µ–º—ã",
        lines: [
          {
            speaker: "fox",
            text:
              "‚Äî –Ø —Ç–æ–≥–¥–∞ —á–µ—Å—Ç–Ω–æ –∑–∞–≤–∞–ª–∏–ª(–∞) –±–∏–ª–µ—Ç.\n" +
              "  –°–∏–¥–µ–ª–∞ –ø–æ—Å–ª–µ —ç–∫–∑–∞–º–µ–Ω–∞ –∏ –¥—É–º–∞–ª–∞, —á—Ç–æ –≤—Å—ë: —è –ø—É—Å—Ç–æ–µ –º–µ—Å—Ç–æ\n" +
              "  –∏ –Ω–∏—á–µ–≥–æ –Ω–µ —É–º–µ—é.",
          },
          {
            speaker: "hedgehog",
            text:
              "‚Äî –Ø —Å–≤–æ–π –±–∏–ª–µ—Ç —Å–¥–∞–ª. –ú–æ–≥ –ø—Ä–æ—Å—Ç–æ —É–π—Ç–∏,\n" +
              "  –Ω–æ —É–≤–∏–¥–µ–ª –õ–∏—Å—ë–Ω–∫–∞, –∫–æ—Ç–æ—Ä—ã–π —Å–∏–¥–µ–ª –æ—á–µ–Ω—å –ø–æ–Ω–∏–∫—à–∏–π.\n" +
              "  –ò –ø–æ–Ω—è–ª, —á—Ç–æ –Ω–µ —Ö–æ—á—É —Å–µ–π—á–∞—Å —É—Ö–æ–¥–∏—Ç—å –æ–¥–∏–Ω.",
          },
          {
            speaker: "hedgehog",
            text:
              "‚Äî –Ø –Ω–µ –ø—Ä–∏–¥—É–º–∞–ª –Ω–∏ –æ–¥–Ω–æ–≥–æ —É–º–Ω–æ–≥–æ —Å–ª–æ–≤–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏,\n" +
              "  –ø–æ—ç—Ç–æ–º—É –ø—Ä–æ—Å—Ç–æ –≤—Å—Ç–∞–ª —Ä—è–¥–æ–º –∏ –º–æ–ª—á–∞–ª.\n" +
              "  –î—É–º–∞–ª: ¬´–ø—É—Å—Ç—å —Ö–æ—Ç—è –±—ã –Ω–µ –æ–¥–∏–Ω(–∞) –≤ —ç—Ç–æ–º –æ—â—É—â–µ–Ω–∏–∏¬ª.",
          },
          {
            speaker: "fox",
            text:
              "‚Äî –≠—Ç–æ –º–æ–ª—á–∞–Ω–∏–µ –ø–æ—á–µ–º—É-—Ç–æ –æ–∫–∞–∑–∞–ª–æ—Å—å –≤–∞–∂–Ω–µ–µ,\n" +
              "  —á–µ–º –ª—é–±–∞—è —Ä–µ—á—å. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —è –Ω–∞–±—Ä–∞–ª–∞—Å—å –Ω–∞–≥–ª–æ—Å—Ç–∏\n" +
              "  –∏ —Å–∞–º–∞ –Ω–∞–ø–∏—Å–∞–ª–∞ –µ–º—É —Å–æ–æ–±—â–µ–Ω–∏–µ.",
          },
          {
            speaker: "fox",
            text:
              "‚Äî –Ø –ø–æ–∑–≤–∞–ª(–∞) –µ–≥–æ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É.\n" +
              "  –î–ª—è –º–µ–Ω—è —ç—Ç–æ –±—ã–ª –æ–≥—Ä–æ–º–Ω—ã–π –ø–µ—Ä–≤—ã–π —à–∞–≥.\n" +
              "  –ò —Å —ç—Ç–æ–≥–æ, –ø–æ —Å—É—Ç–∏, –Ω–∞—á–∞–ª–∞—Å—å –Ω–∞—à–∞ –∏—Å—Ç–æ—Ä–∏—è.",
          },
          {
            speaker: "hedgehog",
            text:
              "‚Äî –ß–µ—Å—Ç–Ω–æ, —è –Ω–µ –æ–∂–∏–¥–∞–ª, —á—Ç–æ –ø–æ—Å–ª–µ —Ç–æ–≥–æ –¥–Ω—è\n" +
              "  –≤–æ–æ–±—â–µ –∫—Ç–æ-—Ç–æ –Ω–∞–ø–∏—à–µ—Ç –ø–µ—Ä–≤—ã–º.\n" +
              "  –ù–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –õ–∏—Å—ë–Ω–∫–∞ —è –∑–∞–ø–æ–º–Ω–∏–ª –Ω–∞–¥–æ–ª–≥–æ.",
          },
        ],
      },
      walks: {
        title: "–ì–ª–∞–≤–∞ 2: –ü—Ä–æ–≥—É–ª–∫–∏ ‚Äî —Å—Ç—Ä–∞–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏—è",
        lines: [
          {
            speaker: "fox",
            text:
              "‚Äî –°–Ω–∞—á–∞–ª–∞ –±—ã–ª–∏ –ø—Ä–æ—Å—Ç–æ ¬´–¥–∞–≤–∞–π –Ω–µ–º–Ω–æ–≥–æ –ø—Ä–æ–≥—É–ª—è–µ–º—Å—è¬ª.\n" +
              "  –ê –ø–æ—Ç–æ–º –≤–Ω–µ–∑–∞–ø–Ω–æ 30‚Äì35 —Ç—ã—Å—è—á —à–∞–≥–æ–≤ —Å—Ç–∞–ª–∏ –Ω–æ—Ä–º–æ–π.\n" +
              "  –ò —ç—Ç–æ –±—ã–ª–æ –æ—á–µ–Ω—å –Ω–∞—à–µ.",
          },
          {
            speaker: "hedgehog",
            text:
              "‚Äî 35 —Ç—ã—Å—è—á —à–∞–≥–æ–≤ ‚Äî —ç—Ç–æ –≤–æ–æ–±—â–µ-—Ç–æ –º–Ω–æ–≥–æ.\n" +
              "  –ù–æ —Å –õ–∏—Å—ë–Ω–∫–æ–º –ø–æ—á–µ–º—É-—Ç–æ –Ω–µ –∫–∞–∑–∞–ª–æ—Å—å –ø–µ—Ä–µ–±–æ—Ä–æ–º.\n" +
              "  –ú—ã –ø—Ä–æ—Å—Ç–æ —à–ª–∏ –∏ –≥–æ–≤–æ—Ä–∏–ª–∏.",
          },
          {
            speaker: "fox",
            text:
              "‚Äî –ö–∞–∂–¥–æ–µ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –º—ã —Ö–æ–¥–∏–ª–∏ –Ω–∞ –í–î–ù–•.\n" +
              "  –ë—É–¥—Ç–æ —à–∫–æ–ª—å–Ω–∞—è —Ñ–∏–∑–∫—É–ª—å—Ç—É—Ä–∞ 2.0,\n" +
              "  —Ç–æ–ª—å–∫–æ –≤–º–µ—Å—Ç–æ –æ—Ü–µ–Ω–æ–∫ ‚Äî —Ä–∞–∑–≥–æ–≤–æ—Ä—ã –∏ –≤–∫—É—Å–Ω—è—à–∫–∏.",
          },
          {
            speaker: "hedgehog",
            text:
              "‚Äî –Ø –ø—Ä–∏–≤—ã–∫ –≤—Å—ë –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å.\n" +
              "  –ê –∑–¥–µ—Å—å –≤–¥—Ä—É–≥ –æ–∫–∞–∑–∞–ª–æ—Å—å, —á—Ç–æ –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –∏–¥—Ç–∏,\n" +
              "  –±–µ–∑ –ø–ª–∞–Ω–∞, –∏ —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è –Ω–∞ —Å–≤–æ—ë–º –º–µ—Å—Ç–µ.",
          },
          {
            speaker: "fox",
            text:
              "‚Äî –ì–æ—Ä–æ–¥ –Ω–∞—á–∞–ª —Å–∂–∏–º–∞—Ç—å—Å—è –¥–æ —Ñ–æ—Ä–º—É–ª—ã:\n" +
              "  ¬´–µ—Å–ª–∏ –º—ã –∏–¥—ë–º –≤–¥–≤–æ—ë–º ‚Äî —ç—Ç–æ —É–∂–µ –º–∞–ª–µ–Ω—å–∫–æ–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ¬ª.\n" +
              "  –ò —è –≤–ø–µ—Ä–≤—ã–µ —Å—Ç–∞–ª–∞ —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Ä—è–¥–æ–º –¥–æ–º.",
          },
        ],
      },
      pskov: {
        title: "–ì–ª–∞–≤–∞ 3: –ü—Å–∫–æ–≤ ‚Äî –Ω–∞—à –º–∞–ª–µ–Ω—å–∫–∏–π –ø–æ–±–µ–≥",
        lines: [
          {
            speaker: "fox",
            text:
              "‚Äî –Ø –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–ª(–∞) –ü—Å–∫–æ–≤ –∫–∞–∫ —Ç–∏—Ö–∏–π –æ—Ç–ø—É—Å–∫.\n" +
              "  –ê –Ω–∞—á–∞–ª–æ—Å—å –≤—Å—ë —Å —Ö–∞–æ—Å–∞: –æ—Ç–º–µ–Ω—ë–Ω–Ω—ã–π —Ä–µ–π—Å, –Ω–æ–≤–æ—Å—Ç–∏,\n" +
              "  –∞—ç—Ä–æ–ø–æ—Ä—Ç –∏ –æ—á–µ–Ω—å —Ç—Ä–µ–≤–æ–∂–Ω–∞—è –≥–æ–ª–æ–≤–∞.",
          },
          {
            speaker: "hedgehog",
            text:
              "‚Äî –î–ª—è –º–µ–Ω—è —ç—Ç–æ —Å–Ω–∞—á–∞–ª–∞ –±—ã–ª–∞ –∑–∞–¥–∞—á–∞ –ø–æ –ª–æ–≥–∏—Å—Ç–∏–∫–µ:\n" +
              "  –Ω–∞–π—Ç–∏ –Ω–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç, –±–∏–ª–µ—Ç—ã, —Ç–∞–∫—Å–∏, –≤—Ä–µ–º—è.\n" +
              "  –í —Ñ–æ–Ω–µ ‚Äî –Ω–æ–≤–æ—Å—Ç–∏ –∏ –õ–∏—Å—ë–Ω–æ–∫, –∫–æ—Ç–æ—Ä–æ–≥–æ —Ö–æ—á–µ—Ç—Å—è –∑–∞—â–∏—Ç–∏—Ç—å.",
          },
          {
            speaker: "fox",
            text:
              "‚Äî –í –∏—Ç–æ–≥–µ –º—ã –ø–æ–µ—Ö–∞–ª–∏ —á–µ—Ä–µ–∑ –ü–µ—Ç–µ—Ä–±—É—Ä–≥.\n" +
              "  –ù–æ—á—å, –¥–æ—Ä–æ–≥–∏–µ —Ç–∞–∫—Å–∏, –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã—Å–ø–∞—Ç—å—Å—è,\n" +
              "  –∏ –æ–¥–∏–Ω —á–µ–ª–æ–≤–µ–∫ —Ä—è–¥–æ–º, —Å –∫–æ—Ç–æ—Ä—ã–º –Ω–µ —Ç–∞–∫ —Å—Ç—Ä–∞—à–Ω–æ.",
          },
          {
            speaker: "fox",
            text:
              "‚Äî –ê –ø–æ—Ç–æ–º –±—ã–ª —Å–∞–º –ü—Å–∫–æ–≤: –±–∞—Ä—Å–∏–∫–∏ –Ω–∞ –ª—é–∫–∞—Ö,\n" +
              "  –∫—Ä–µ–ø–æ—Å—Ç–∏, –º—É–∑–µ–π–Ω—ã–µ –ª—é–¥–∏, —Ä–µ–∫–∞, –º–æ–Ω–∞—Å—Ç—ã—Ä—å.\n" +
              "  –¢–∏—à–∏–Ω–∞, –∫–æ—Ç–æ—Ä–∞—è –∫–∞–∫ –±—É–¥—Ç–æ –ª–µ—á–∏—Ç.",
          },
          {
            speaker: "hedgehog",
            text:
              "‚Äî –î–ª—è –º–µ–Ω—è —ç—Ç–æ —Å—Ç–∞–ª–æ –º–µ—Å—Ç–æ–º, –≥–¥–µ –º–æ–∑–≥ –Ω–∞–∫–æ–Ω–µ—Ü\n" +
              "  –≤—ã–∫–ª—é—á–∏–ª —Ä–µ–∂–∏–º ¬´—Å—Ç–∞—Ä–æ—Å—Ç–∞ –≤—Å–µ–≥–æ –º–∏—Ä–∞¬ª –∏ –ø—Ä–æ—Å—Ç–æ –¥—ã—à–∞–ª.\n" +
              "  –û—Å–æ–±–µ–Ω–Ω–æ, –∫–æ–≥–¥–∞ —Ä—è–¥–æ–º —à—ë–ª —Ç–æ—Ç —Å–∞–º—ã–π —á–µ–ª–æ–≤–µ–∫.",
          },
          {
            speaker: "fox",
            text:
              "‚Äî –ú–µ–∂–¥—É —Å—Ç–µ–Ω–∞–º–∏ –∏ –≤–æ–¥–æ–π —Å—Ç–∞–ª–æ —è—Å–Ω–æ:\n" +
              "  –∫—Ä–µ–ø–æ—Å—Ç–∏ –±—ã–≤–∞—é—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –∫–∞–º–µ–Ω–Ω—ã–º–∏.\n" +
              "  –ï—Å—Ç—å –µ—â—ë –∫—Ä–µ–ø–æ—Å—Ç—å ¬´–º—ã¬ª, –∏ –µ—ë —Ö–æ—á–µ—Ç—Å—è –±–µ—Ä–µ—á—å.",
          },
        ],
      },
      japan: {
        title: "–ì–ª–∞–≤–∞ 4: –Ø–ø–æ–Ω–∏—è ‚Äî –∞–Ω–∏–º–µ –±–µ–∑ —Å—É–±—Ç–∏—Ç—Ä–æ–≤",
        lines: [
          {
            speaker: "fox",
            text:
              "‚Äî –î–ª—è –º–µ–Ω—è –Ø–ø–æ–Ω–∏—è ‚Äî —ç—Ç–æ —ç–∫–∑–∞–º–µ–Ω –ø–æ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º—É,\n" +
              "  –Ω–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∞, –¥—Ä—É–≥–æ–π —è–∑—ã–∫ –≤–æ–∫—Ä—É–≥\n" +
              "  –∏ –æ—â—É—â–µ–Ω–∏–µ, —á—Ç–æ –º–∏—Ä —Å–Ω–æ–≤–∞ –æ—Ç–∫—Ä—ã–ª –Ω–æ–≤—É—é –∫–∞—Ä—Ç—É.",
          },
          {
            speaker: "hedgehog",
            text:
              "‚Äî –î–æ —ç—Ç–æ–≥–æ –Ø–ø–æ–Ω–∏—è –±—ã–ª–∞ —á–µ–º-—Ç–æ –¥–∞–ª—ë–∫–∏–º:\n" +
              "  –∫–∞—Ä—Ç–∏–Ω–∫–∏, –∏—Å—Ç–æ—Ä–∏–∏ –¥—Ä—É–≥–∏—Ö –ª—é–¥–µ–π.\n" +
              "  –ê —Ç—É—Ç –≤–Ω–µ–∑–∞–ø–Ω–æ ‚Äî –ø–æ–µ–∑–¥–∞, –∏–µ—Ä–æ–≥–ª–∏—Ñ—ã, —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å.",
          },
          {
            speaker: "fox",
            text:
              "‚Äî –†–∞–Ω—å—à–µ –ø–æ—Å–ª–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π –º–Ω–µ —Ä–µ–¥–∫–æ —Ö–æ—Ç–µ–ª–æ—Å—å –æ–±—Ä–∞—Ç–Ω–æ.\n" +
              "  –î–æ–º –∫–∞–∑–∞–ª—Å—è –≤—Ä–µ–º–µ–Ω–Ω—ã–º –ø—É–Ω–∫—Ç–æ–º.\n" +
              "  –ê —Ç—É—Ç –≤–ø–µ—Ä–≤—ã–µ –ø–æ—è–≤–∏–ª–æ—Å—å —á—É–≤—Å—Ç–≤–æ:\n" +
              "  ¬´—è —Ö–æ—á—É –¥–æ–º–æ–π –∏–º–µ–Ω–Ω–æ –∫ —á–µ–ª–æ–≤–µ–∫—É¬ª.",
          },
          {
            speaker: "hedgehog",
            text:
              "‚Äî –Ø –Ω–∏–∫–æ–≥–¥–∞ —Å–µ—Ä—å—ë–∑–Ω–æ –Ω–µ –¥—É–º–∞–ª –æ –ø–µ—Ä–µ–µ–∑–¥–µ –≤ –ê–∑–∏—é.\n" +
              "  –ù–æ –≤ —ç—Ç–æ–π –ø–æ–µ–∑–¥–∫–µ —Å—Ç–∞–ª–æ –Ω–µ —Å—Ç—Ä–∞—à–Ω–æ\n" +
              "  —Ö–æ—Ç—è –±—ã —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —ç—Ç–æ –∫–∞–∫ –≤–∞—Ä–∏–∞–Ω—Ç ‚Äî\n" +
              "  –ø–æ–∫–∞ —Ä—è–¥–æ–º –∏–¥—ë—Ç –õ–∏—Å—ë–Ω–æ–∫.",
          },
          {
            speaker: "fox",
            text:
              "‚Äî –í –∏—Ç–æ–≥–µ –º—ã –≤–µ—Ä–Ω—É–ª–∏—Å—å –Ω–µ —Ç–æ–ª—å–∫–æ —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏\n" +
              "  –∏ –≥–∞–ª–æ—á–∫–æ–π ¬´—Å–¥–∞–Ω —ç–∫–∑–∞–º–µ–Ω¬ª,\n" +
              "  –Ω–æ –∏ —Å –æ—á–µ–Ω—å —á—ë—Ç–∫–∏–º –æ—â—É—â–µ–Ω–∏–µ–º,\n" +
              "  —á—Ç–æ –≤–º–µ—Å—Ç–µ –º–æ–∂–Ω–æ –≤—ã—Ç—è–Ω—É—Ç—å –¥–∞–∂–µ –¥—Ä—É–≥—É—é –≤—Å–µ–ª–µ–Ω–Ω—É—é.",
          },
        ],
      },
    };

    const artifacts = {
      exam: {
        key: "exam",
        icon: "üìé",
        name: "–ü–æ–±–µ–∂–¥—ë–Ω, –Ω–æ –Ω–µ —Å–ª–æ–º–ª–µ–Ω",
        short: "–ü—Ä–æ–≤–∞–ª ‚Äî –Ω–µ –∫–æ–Ω–µ—Ü, –µ—Å–ª–∏ —Ä—è–¥–æ–º –µ—Å—Ç—å —Ç–æ—Ç, –∫—Ç–æ –æ—Å—Ç–∞—ë—Ç—Å—è.",
        description:
          "–≠—Ç–æ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ –≤—Å—ë —Ä—É—à–∏—Ç—Å—è.\n" +
          "–ò–Ω–æ–≥–¥–∞ –ø—Ä–æ–≤–∞–ª ‚Äî –Ω–µ —Ç–æ—á–∫–∞, –∞ –¥–≤–µ—Ä—å.\n" +
          "–ò –∫—Ç–æ-—Ç–æ, –∫—Ç–æ –ø—Ä–æ—Å—Ç–æ —Å—Ç–æ–∏—Ç —Ä—è–¥–æ–º –∏ –º–æ–ª—á–∏—Ç,\n" +
          "–±—ã–≤–∞–µ—Ç –≤–∞–∂–Ω–µ–µ –ª—é–±–æ–π —É–¥–∞—á–∏.",
      },
      walks: {
        key: "walks",
        icon: "üë£",
        name: "35 000 —à–∞–≥–æ–≤ –≤–ø–µ—Ä—ë–¥",
        short: "–°–æ–≤–º–µ—Å—Ç–Ω—ã–µ —à–∞–≥–∏ —Å–æ–∑–¥–∞—é—Ç –æ–±—â—É—é –¥–æ—Ä–æ–≥—É.",
        description:
          "–ò–Ω–æ–≥–¥–∞ –ø—É—Ç—å –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Å–ª–æ–∂–Ω–æ–π —Ü–µ–ª–∏.\n" +
          "–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–¥—Ç–∏ —Ä—è–¥–æ–º ‚Äî –∏ –¥–∞–∂–µ –æ–±—ã—á–Ω—ã–µ —É–ª–∏—Ü—ã\n" +
          "—Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ–º.",
      },
      pskov: {
        key: "pskov",
        icon: "üêà",
        name: "–¢–∏—à–∏–Ω–∞, –∫–æ—Ç–æ—Ä–∞—è –ª–µ—á–∏—Ç",
        short: "–ë—ã—Ç—å —Ä—è–¥–æ–º ‚Äî –∏–Ω–æ–≥–¥–∞ –≤–∞–∂–Ω–µ–µ, —á–µ–º –≤—Å—ë —á–∏–Ω–∏—Ç—å.",
        description:
          "–ü—Å–∫–æ–≤ —É—á–∏—Ç —Ç–æ–º—É, —á—Ç–æ —Ç–∏—à–∏–Ω–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–º–æ–º.\n" +
          "–ß—Ç–æ —Ç—Ä–µ–≤–æ–≥–∞ —Ä–∞—Å—Ç–≤–æ—Ä—è–µ—Ç—Å—è –≤ –∫–∞–º–Ω–µ, –≤–æ–¥–µ\n" +
          "–∏ –≤ —á–µ–ª–æ–≤–µ–∫–µ —Ä—è–¥–æ–º.\n" +
          "–î–æ—Ä–æ–≥–∞, –Ω–∞—á–∞–≤—à–∞—è—Å—è —Å —Ö–∞–æ—Å–∞, –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ —Ç—É–¥–∞,\n" +
          "–≥–¥–µ –≤–ø–µ—Ä–≤—ã–µ —Å–ø–æ–∫–æ–π–Ω–æ.",
      },
      japan: {
        key: "japan",
        icon: "üöÑ",
        name: "–õ—é–±–æ–≤—å ‚Äî —Ç–æ—á–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞",
        short: "–î–æ–º ‚Äî —ç—Ç–æ –Ω–µ –º–µ—Å—Ç–æ. –î–æ–º ‚Äî —ç—Ç–æ –º—ã.",
        description:
          "–Ø–ø–æ–Ω–∏—è —Å—Ç–∞–ª–∞ —ç–∫–∑–∞–º–µ–Ω–æ–º –∏ –ø–µ—Ä–µ–º–µ–Ω–æ–π.\n" +
          "–í–ø–µ—Ä–≤—ã–µ ¬´–¥–æ–º¬ª –æ–∫–∞–∑–∞–ª—Å—è –Ω–µ –≥–æ—Ä–æ–¥–æ–º,\n" +
          "–∞ —á–µ–ª–æ–≤–µ–∫–æ–º, –∫ –∫–æ—Ç–æ—Ä–æ–º—É —Ö–æ—á–µ—Ç—Å—è –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è,\n" +
          "–≤ –∫–∞–∫–æ–π –±—ã —Ç–æ—á–∫–µ –º–∏—Ä–∞ —Ç—ã –Ω–∏ –±—ã–ª–∞.",
      },
    };

    const unlockedArtifacts = {
      exam: false,
      walks: false,
      pskov: false,
      japan: false,
    };

    function logToConsole(text) {
      consoleBox.textContent = text;
    }

    function showScreen(num) {
      Object.keys(screens).forEach((key) => screens[key].classList.remove("active"));
      if (screens[num]) {
        screens[num].classList.add("active");
      }
    }

    function resetMaze() {
      mazeStep = 0;
      mazeFox.style.left = "6%";
      mazeHedgehog.style.right = "6%";
      mazeFox.classList.remove("active");
      mazeHedgehog.classList.remove("active");
      mazeHeart.classList.remove("visible");
    }

    function advanceMaze() {
      mazeStep = Math.min(mazeStep + 1, 4);
      const foxPos = 6 + mazeStep * 8;
      const hedgehogPos = 6 + mazeStep * 8;
      mazeFox.style.left = foxPos + "%";
      mazeHedgehog.style.right = hedgehogPos + "%";
    }

    function anyArtifactUnlocked() {
      return Object.values(unlockedArtifacts).some(Boolean);
    }

    function allArtifactsUnlocked() {
      return Object.values(unlockedArtifacts).every(Boolean);
    }

    function updateVN() {
      if (!currentChapter) {
        chapterTitle.textContent = "–≥–ª–∞–≤–∞ –µ—â—ë –Ω–µ –≤—ã–±—Ä–∞–Ω–∞";
        vnSpeaker.textContent = "–í—ã–±–µ—Ä–∏—Ç–µ –≥–ª–∞–≤—É";
        vnText.textContent =
          "–õ–∏—Å—ë–Ω–æ–∫ –∏ –Å–∂–∏–∫ –±—É–¥—É—Ç –ø–æ –æ—á–µ—Ä–µ–¥–∏ –≥–æ–≤–æ—Ä–∏—Ç—å,  \n" +
          "–∞ —Ç–æ—Ç, –∫—Ç–æ —Å–µ–π—á–∞—Å –≥–æ–≤–æ—Ä–∏—Ç, –ø–æ–¥—Å–≤–µ—Ç–∏—Ç—Å—è –ø–æ–¥ —Ñ–æ–Ω–∞—Ä–∏–∫–∞–º–∏.";
        vnAvatar.className = "vn-avatar fox";
        vnAvatar.textContent = "ü¶ä";
        mazeFox.classList.remove("active");
        mazeHedgehog.classList.remove("active");
        return;
      }

      const script = scripts[currentChapter];
      if (!script) return;

      if (currentLine < 0) currentLine = 0;
      if (currentLine >= script.lines.length) currentLine = script.lines.length - 1;

      const line = script.lines[currentLine];
      const isFox = line.speaker === "fox";

      chapterTitle.textContent = script.title;

      vnSpeaker.textContent = isFox ? "–õ–∏—Å—ë–Ω–æ–∫" : "–Å–∂–∏–∫";
      vnText.textContent = line.text;

      vnAvatar.className = "vn-avatar " + (isFox ? "fox" : "hedgehog");
      vnAvatar.textContent = isFox ? "ü¶ä" : "ü¶î";

      mazeFox.classList.toggle("active", isFox);
      mazeHedgehog.classList.toggle("active", !isFox);
    }

    function startPath(who) {
      showScreen(2);

      if (who === "fox") {
        pathText.textContent =
          "–ü—É—Ç—å –õ–∏—Å—ë–Ω–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω.\n\n" +
          "–õ–∏—Å—ë–Ω–æ–∫ —É—á–∏—Ç—Å—è –Ω–∞ –∏–Ω–∂–µ–Ω–µ—Ä–∞ –±–∏–æ–º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π —Ç–µ—Ö–Ω–∏–∫–∏,\n" +
          "—É—á–∏—Ç –∫–∏—Ç–∞–π—Å–∫–∏–π, –º–µ—á—Ç–∞–µ—Ç –æ –º–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä–µ –≤ –ö–∏—Ç–∞–µ,\n" +
          "—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä—É–µ—Ç —É–ª–æ—á–∫–∏ –∏ –ª—é–¥–µ–π –∏ –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ–≤–º–µ—Å—Ç–∏—Ç—å –≤—Å—ë —ç—Ç–æ\n" +
          "—Å –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–º–∏, –ü–õ–ò–° –∏ –¥–µ–¥–ª–∞–π–Ω–∞–º–∏.\n\n" +
          "–ò–Ω–æ–≥–¥–∞ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ –º–∏—Ä –æ–≥—Ä–æ–º–Ω—ã–π,\n" +
          "–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –º–Ω–æ–≥–æ, –∞ –æ–ø–æ—Ä—ã –∫–∞–∫ –±—É–¥—Ç–æ –Ω–µ—Ç.\n" +
          "–ù–æ –≥–¥–µ-—Ç–æ —Ä—è–¥–æ–º —É–∂–µ –∏–¥—ë—Ç –æ–¥–∏–Ω –Å–∂–∏–∫,\n" +
          "–∫–æ—Ç–æ—Ä—ã–π –æ—á–µ–Ω—å –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è –¥–ª—è –ø—É–Ω–∫—Ç–∞ ¬´–¥–æ–º¬ª.";
        logToConsole(
          "> –†–µ–∂–∏–º –Ω–∞–±–ª—é–¥–µ–Ω–∏—è: –õ–∏—Å—ë–Ω–æ–∫\n" +
          "> –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: –∫–∏—Ç–∞–π—Å–∫–∏–π, —Ñ–æ—Ç–æ–∞–ø–ø–∞—Ä–∞—Ç, —á–µ–º–æ–¥–∞–Ω, –ü–õ–ò–°\n" +
          "> –°—Ç–∞—Ç—É—Å: —Å–ø–æ—Å–æ–±–µ–Ω(–∞) –Ω–∞ –º–Ω–æ–≥–æ–µ, –Ω–æ –µ—â—ë –∏—â–µ—Ç —Ç–æ—á–∫—É –æ–ø–æ—Ä—ã"
        );
      } else {
        pathText.textContent =
          "–ü—É—Ç—å –Å–∂–∏–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω.\n\n" +
          "–Å–∂–∏–∫ ‚Äî —Å—Ç–∞—Ä–æ—Å—Ç–∞, –∏–Ω–∂–µ–Ω–µ—Ä, —á–µ–ª–æ–≤–µ–∫ ¬´—è –≤—Å—ë —Ä–∞–∑—Ä—É–ª—é¬ª.\n" +
          "–í –ø—Ä–æ—à–ª–æ–º ‚Äî —Ñ–∏–≥—É—Ä–∏—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–≤—ã–∫ –¥–µ—Ä–∂–∞—Ç—å —Ä–∞–≤–Ω–æ–≤–µ—Å–∏–µ –Ω–∞ –ª—å–¥—É,\n" +
          "–∏–≥—Ä–∞–ª –Ω–∞ —Å–∫—Ä–∏–ø–∫–µ –∏ –¥–∞–∂–µ –≤ –≥—Ä—É–ø–ø–µ.\n\n" +
          "–ü—Ä–æ –ø–µ—Ä–µ–µ–∑–¥—ã –≤ –ê–∑–∏—é –æ–Ω –Ω–µ —Ç–æ —á—Ç–æ –Ω–µ –º–µ—á—Ç–∞–ª ‚Äî\n" +
          "–æ–Ω –≤ —Ü–µ–ª–æ–º –Ω–µ –¥—É–º–∞–ª, —á—Ç–æ –∂–∏–∑–Ω—å –º–æ–∂–µ—Ç —Ç–∞–∫ –≤—ã–≤–µ–∑—Ç–∏.\n" +
          "–ë—ã–ª–∞ —Ä–∞–±–æ—Ç–∞, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, –ª—é–¥–∏ –≤–æ–∫—Ä—É–≥,\n" +
          "–Ω–æ –∫–∞–∫ –±—É–¥—Ç–æ –±–µ–∑ —á—ë—Ç–∫–æ–π –ª–∏—á–Ω–æ–π –º–µ—á—Ç—ã.\n\n" +
          "–í—Å–µ–ª–µ–Ω–Ω–∞—è –ø–æ—Å—Ç–∞–≤–∏–ª–∞ –ø–æ–º–µ—Ç–∫—É:\n" +
          "¬´–Ω–∞–¥–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ–º–Ω–æ–≥–æ –∏–º–ø—É–ª—å—Å–∏–≤–Ω–æ–≥–æ —Å–æ–ª–Ω—Ü–∞¬ª.";
        logToConsole(
          "> –†–µ–∂–∏–º –Ω–∞–±–ª—é–¥–µ–Ω–∏—è: –Å–∂–∏–∫\n" +
          "> –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: —Ñ–∏–≥—É—Ä–∏—Å—Ç, —Å—Ç–∞—Ä–æ—Å—Ç–∞, —Å–∫—Ä–∏–ø–∫–∞, –≥—Ä—É–ø–ø–∞\n" +
          "> –°—Ç–∞—Ç—É—Å: —É—Å—Ç–æ–π—á–∏–≤—ã–π, –Ω–æ –ø–æ–∫–∞ –±–µ–∑ –º–µ—á—Ç—ã –ø—Ä–æ –ê–∑–∏—é"
        );
      }
    }

    function nextScreen(num) {
      showScreen(num);
      if (num === 3) {
        jointText.textContent =
          "–¢–µ–ø–µ—Ä—å —ç—Ç–æ –º–∞–ª–µ–Ω—å–∫–∞—è –≤–∏–∑—É–∞–ª—å–Ω–∞—è –Ω–æ–≤–µ–ª–ª–∞:  \n" +
          "–õ–∏—Å—ë–Ω–æ–∫ –∏ –Å–∂–∏–∫ –ø–æ –æ—á–µ—Ä–µ–¥–∏ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—é—Ç –æ–¥–Ω—É –∏ —Ç—É –∂–µ –∏—Å—Ç–æ—Ä–∏—é,  \n" +
          "–∞ –º—ã —Å–ª—É—à–∞–µ–º –∏—Ö –¥–∏–∞–ª–æ–≥.\n\n" +
          "–ì–ª–∞–≤—ã –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É ¬´üìë –≥–ª–∞–≤—ã¬ª —Å–≤–µ—Ä—Ö—É —Å–ø—Ä–∞–≤–∞,\n" +
          "–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –±—É–¥—É—Ç –∫–æ–ø–∏—Ç—å—Å—è –≤ —Å—É–Ω–¥—É–∫–µ-–∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ.\n" +
          "–§–∏–Ω–∞–ª—å–Ω–∞—è –≥–ª–∞–≤–∞ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –≤—Å–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –±—É–¥—É—Ç —Å–æ–±—Ä–∞–Ω—ã.";
        logToConsole(
          "> –û—Ç–∫—Ä—ã—Ç —Ä–µ–∂–∏–º –≤–∏–∑—É–∞–ª—å–Ω–æ–π –Ω–æ–≤–µ–ª–ª—ã\n" +
          "> –°–æ–±–∏—Ä–∞–π—Ç–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å —Ñ–∏–Ω–∞–ª"
        );
        topActionsRow.style.display = "flex";
      }
    }

    function buildInventory() {
      const items = Object.keys(artifacts).map((key) => {
        const art = artifacts[key];
        const unlocked = unlockedArtifacts[key];

        if (!unlocked) {
          return `<div style="opacity:0.5; margin-bottom:6px;">
            üîí ???  
            <div style="font-size:7px;">–ê—Ä—Ç–µ—Ñ–∞–∫—Ç –µ—â—ë –Ω–µ –æ—Ç–∫—Ä—ã—Ç</div>
          </div>`;
        }

        return `<div style="margin-bottom:8px;">
          ${art.icon} <strong>${art.name}</strong>
          <div style="font-size:7px; white-space:pre-line; margin-top:2px;">${art.description}</div>
        </div>`;
      });

      inventoryList.innerHTML = items.join("<hr style='border:none;border-top:1px dashed #5c1b1f;margin:6px 0;' />");
    }

    function unlockArtifact(chKey) {
      if (!artifacts[chKey]) return;
      if (unlockedArtifacts[chKey]) return;

      unlockedArtifacts[chKey] = true;
      buildInventory();

      if (anyArtifactUnlocked()) {
        inventoryIcon.textContent = "üß∞‚ú®";
      }

      const art = artifacts[chKey];
      artifactPopupName.textContent = `${art.icon} ${art.name}`;
      artifactPopupText.textContent = art.short;
      artifactPopup.style.display = "block";

      setTimeout(() => {
        artifactPopup.style.display = "none";
      }, 2600);

      logToConsole(
        `> –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –∞—Ä—Ç–µ—Ñ–∞–∫—Ç: ${art.name}\n` +
        `> –î–æ–±–∞–≤–ª–µ–Ω –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å`
      );

      // –ø–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É "–°–ª–µ–¥—É—é—â–∞—è –≥–ª–∞–≤–∞", –µ—Å–ª–∏ –µ—Å—Ç—å –∫—É–¥–∞ –∏–¥—Ç–∏
      const nextKey = getNextChapterKey(chKey);
      if (nextKey && nextChapterRow && nextChapterBtn) {
        const nextScript = scripts[nextKey];
        const label = nextScript ? nextScript.title : "–°–ª–µ–¥—É—é—â–∞—è –≥–ª–∞–≤–∞";
        nextChapterBtn.textContent = "‚ûú " + label;
        nextChapterRow.style.display = "flex";
      } else if (nextChapterRow) {
        nextChapterRow.style.display = "none";
      }

      // –µ—Å–ª–∏ –≤—Å–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–æ–±—Ä–∞–Ω—ã ‚Äî —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞
      if (allArtifactsUnlocked()) {
        connectBtn.style.display = "block";
        connectBtn.classList.add("flash");
        jointText.textContent =
          "–í—Å–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–æ–±—Ä–∞–Ω—ã!  \n" +
          "–í—ã –æ—Ç–∫—Ä—ã–ª–∏ –≤—Å–µ –≥–ª–∞–≤—ã –∏ —Å–æ–±—Ä–∞–ª–∏ –≤—Å–µ –º–∞–ª–µ–Ω—å–∫–∏–µ –Ω–∞–≤—ã–∫–∏ –ª—é–±–≤–∏.\n\n" +
          "–¢–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –≥–ª–∞–≤–∞: –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –±–æ–ª—å—à—É—é –∫–Ω–æ–ø–∫—É,\n" +
          "—á—Ç–æ–±—ã —Å–æ–µ–¥–∏–Ω–∏—Ç—å –ø—É—Ç–∏ –õ–∏—Å—ë–Ω–∫–∞ –∏ –Å–∂–∏–∫–∞ –∏ –ø–µ—Ä–µ–π—Ç–∏ –∫ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—é.";
        logToConsole(
          "> –í—Å–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –ø–∞—Ä—ã —Å–æ–±—Ä–∞–Ω—ã\n" +
          "> –§–∏–Ω–∞–ª—å–Ω–∞—è –≥–ª–∞–≤–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ ‚Äî –Ω–∞–∂–º–∏—Ç–µ –±–æ–ª—å—à—É—é –∫–Ω–æ–ø–∫—É —Å–Ω–∏–∑—É"
        );
        setTimeout(() => {
          connectBtn.classList.remove("flash");
        }, 1600);
      }
    }

    function selectChapter(key) {
      currentChapter = key;
      currentLine = 0;
      if (nextChapterRow) nextChapterRow.style.display = "none";
      advanceMaze();
      updateVN();
      closeChapters();

      const script = scripts[key];
      if (script) {
        jointText.textContent =
          script.title + "\n\n" +
          "–õ–∏—Å—ë–Ω–æ–∫ –∏ –Å–∂–∏–∫ –ø–æ –æ—á–µ—Ä–µ–¥–∏ –≤—Å–ø–æ–º–∏–Ω–∞—é—Ç, –∫–∞–∫ —ç—Ç–æ –±—ã–ª–æ.\n" +
          "–õ–∏—Å—Ç–∞–π—Ç–µ —Å—Ç—Ä–µ–ª–∫–∞–º–∏, —á—Ç–æ–±—ã –¥–æ–π—Ç–∏ –¥–æ –∫–æ–Ω—Ü–∞ –≥–ª–∞–≤—ã\n" +
          "–∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç.";
      }
    }

    function showExam() {
      selectChapter("exam");
      logToConsole(
        "> –ì–ª–∞–≤–∞ 1: –≠–∫–∑–∞–º–µ–Ω ‚Äî –ø–µ—Ä–≤—ã–π —Å–±–æ–π —Å–∏—Å—Ç–µ–º—ã\n" +
        "> –î–æ–π–¥–∏—Ç–µ –¥–æ –∫–æ–Ω—Ü–∞ –¥–∏–∞–ª–æ–≥–∞, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç"
      );
    }

    function showWalks() {
      selectChapter("walks");
      logToConsole(
        "> –ì–ª–∞–≤–∞ 2: –ü—Ä–æ–≥—É–ª–∫–∏ ‚Äî —Å—Ç—Ä–∞–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏—è\n" +
        "> 35k —à–∞–≥–æ–≤ –∏ –æ–¥–∏–Ω –æ–±—â–∏–π –º–∞—Ä—à—Ä—É—Ç"
      );
    }

    function showPskov() {
      selectChapter("pskov");
      logToConsole(
        "> –ì–ª–∞–≤–∞ 3: –ü—Å–∫–æ–≤ ‚Äî –Ω–∞—à –º–∞–ª–µ–Ω—å–∫–∏–π –ø–æ–±–µ–≥\n" +
        "> –•–∞–æ—Å –Ω–∞ –≤—Ö–æ–¥–µ, –∫—Ä–µ–ø–æ—Å—Ç—å –Ω–∞ –≤—ã—Ö–æ–¥–µ"
      );
    }

    function showJapan() {
      selectChapter("japan");
      logToConsole(
        "> –ì–ª–∞–≤–∞ 4: –Ø–ø–æ–Ω–∏—è ‚Äî –∞–Ω–∏–º–µ –±–µ–∑ —Å—É–±—Ç–∏—Ç—Ä–æ–≤\n" +
        "> –≠–∫–∑–∞–º–µ–Ω, –¥—Ä—É–≥–∞—è —Å—Ç—Ä–∞–Ω–∞ –∏ –Ω–æ–≤–∞—è —Ç–æ—á–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞"
      );
    }

    function nextLine() {
      if (!currentChapter) return;
      const script = scripts[currentChapter];
      if (!script) return;

      if (currentLine < script.lines.length - 1) {
        currentLine++;
        updateVN();
        if (currentLine === script.lines.length - 1) {
          unlockArtifact(currentChapter);
        }
      }
    }

    function prevLine() {
      if (!currentChapter) return;
      const script = scripts[currentChapter];
      if (!script) return;

      if (currentLine > 0) {
        currentLine--;
        updateVN();
      }
    }

    function goToNextChapter() {
      const nextKey = getNextChapterKey(currentChapter);
      if (!nextKey) return;
      selectChapter(nextKey);
      if (nextChapterRow) nextChapterRow.style.display = "none";
    }

    function connectPaths() {
      showScreen(3);

      logToConsole(
        "> –ò–Ω–∏—Ü–∏–∞—Ü–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø—É—Ç–µ–π\n" +
        "> –õ–∏—Å—ë–Ω–æ–∫ –∏ –Å–∂–∏–∫ –¥–≤–∏–≥–∞—é—Ç—Å—è –Ω–∞–≤—Å—Ç—Ä–µ—á—É –ø–æ–¥ —Ñ–æ–Ω–∞—Ä–∏–∫–∞–º–∏..."
      );

      mazeFox.style.left = "42%";
      mazeHedgehog.style.right = "42%";

      setTimeout(() => {
        mazeHeart.classList.add("visible");
      }, 400);

      setTimeout(() => {
        showScreen(4);
        logToConsole(
          "> –°–∏–≥–Ω–∞–ª –ª—é–±–≤–∏ —Å—Ç–∞–±–∏–ª–µ–Ω\n" +
          "> –î–∞—Ç–∞ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞: 10.05.2026 19:40\n" +
          "> –ü–µ—Ä–µ—Ö–æ–¥ –≤ —Ä–µ–∂–∏–º —Å–≤–∞–¥–µ–±–Ω–æ–≥–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è"
        );
      }, 900);
    }

    function backToStart() {
      showScreen(1);
      rsvpSuccess.style.display = "none";
      rsvpForm.style.display = "flex";
      rsvpForm.reset();
      resetMaze();
      currentChapter = null;
      currentLine = 0;
      chapterTitle.textContent = "–≥–ª–∞–≤–∞ –µ—â—ë –Ω–µ –≤—ã–±—Ä–∞–Ω–∞";
      updateVN();
      artifactPopup.style.display = "none";
      topActionsRow.style.display = "none";
      connectBtn.style.display = "none";
      if (nextChapterRow) nextChapterRow.style.display = "none";
      logToConsole(
        "> –í–æ–∑–≤—Ä–∞—Ç –∫ –Ω–∞—á–∞–ª—É –∏—Å—Ç–æ—Ä–∏–∏\n" +
        "> –ú–æ–∂–Ω–æ —Å–Ω–æ–≤–∞ –≤—ã–±—Ä–∞—Ç—å —Ä–∞–∫—É—Ä—Å –∏ –ø—Ä–æ–π—Ç–∏ –≥–ª–∞–≤—ã"
      );
    }

    function openChapters() {
      chaptersOverlay.classList.add("visible");
    }

    function closeChapters() {
      chaptersOverlay.classList.remove("visible");
    }

    chaptersToggle.addEventListener("click", openChapters);
    chaptersClose.addEventListener("click", closeChapters);
    chaptersOverlay.addEventListener("click", (e) => {
      if (e.target === chaptersOverlay) closeChapters();
    });

    function openInventory() {
      buildInventory();
      inventoryOverlay.classList.add("visible");
    }
    function closeInventory() {
      inventoryOverlay.classList.remove("visible");
    }

    inventoryToggle.addEventListener("click", openInventory);
    inventoryClose.addEventListener("click", closeInventory);
    inventoryOverlay.addEventListener("click", (e) => {
      if (e.target === inventoryOverlay) closeInventory();
    });

    // –∫–ª–∏–∫ –ø–æ —Å–µ—Ä–¥–µ—á–∫—É ‚Äî —Å–ø–∞—Å–∏–±–æ —á—Ç–æ —Å –Ω–∞–º–∏
    let heartToastTimeout = null;
    mazeHeart.addEventListener("click", () => {
      if (!mazeHeart.classList.contains("visible")) return;
      heartToast.style.display = "block";
      if (heartToastTimeout) clearTimeout(heartToastTimeout);
      heartToastTimeout = setTimeout(() => {
        heartToast.style.display = "none";
      }, 2200);
    });

    // RSVP
    rsvpForm.addEventListener("submit", (e) => {
      e.preventDefault();

      const name = document.getElementById("name").value || "–ì–æ—Å—Ç—å";
      const status = document.getElementById("status").value || "–Ω–µ —É–∫–∞–∑–∞–Ω";
      const plusone = document.getElementById("plusone").value || "–Ω–µ —É–∫–∞–∑–∞–Ω";
      const song = document.getElementById("song").value || "–Ω–µ —É–∫–∞–∑–∞–Ω–∞";
      const message = document.getElementById("message").value || "‚Äî";

      const emailTo = "sazroval@bk.ru";

      const subject = `RSVP –Ω–∞ —Å–≤–∞–¥—å–±—É –õ–∏—Å—ë–Ω–∫–∞ –∏ –Å–∂–∏–∫–∞ ‚Äî ${name}`;
      const body =
        `–ò–º—è: ${name}\n` +
        `–°—Ç–∞—Ç—É—Å: ${status}\n` +
        `+1: ${plusone}\n` +
        `–ü–µ—Å–Ω—è: ${song}\n` +
        `–°–æ–æ–±—â–µ–Ω–∏–µ:\n${message}\n\n` +
        `–ê–≤—Ç–æ-–ø–∏—Å—å–º–æ —Å–æ —Å–≤–∞–¥–µ–±–Ω–æ–≥–æ —Å–∞–π—Ç–∞ ü¶äü¶î`;

      const mailtoLink =
        "mailto:" +
        encodeURIComponent(emailTo) +
        "?subject=" +
        encodeURIComponent(subject) +
        "&body=" +
        encodeURIComponent(body);

      window.location.href = mailtoLink;

      rsvpForm.style.display = "none";
      rsvpSuccess.style.display = "block";

      logToConsole(
        `> RSVP –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ\n` +
        `> –ü–æ–ª—É—á–∞—Ç–µ–ª—å: ${emailTo}\n` +
        `> ${name}, —Å–ø–∞—Å–∏–±–æ, —á—Ç–æ –≤—ã —Å –Ω–∞–º–∏ –ø–æ–¥ –∫—Ä–∞—Å–Ω—ã–º–∏ —Ñ–æ–Ω–∞—Ä–∏–∫–∞–º–∏ ‚ù§Ô∏è`
      );
    });

    // –ø–µ—á–∞—Ç—å –ø—Ä–æ–ª–æ–≥–∞
    function typePrologue() {
      if (!prologueBox) return;
      if (prologueIndex < prologueFullText.length) {
        prologueBox.textContent += prologueFullText.charAt(prologueIndex);
        prologueIndex++;
        setTimeout(typePrologue, prologueSpeed);
      } else {
        prologueBtnRow.style.display = "flex";
      }
    }

    // –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    showScreen(0);
    updateVN();
    buildInventory();
    typePrologue();
  </script>
</body>
</html>
